

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to IMALSE’s documentation! &mdash; imalse v0.0 alpha documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.0 alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="imalse v0.0 alpha documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">imalse v0.0 alpha documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-imalse-s-documentation">
<h1>Welcome to IMALSE&#8217;s documentation!<a class="headerlink" href="#welcome-to-imalse-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>IMALSE (<strong>I</strong>ntegrated   <strong>MAL</strong>ware <strong>S</strong>imulator and <strong>E</strong>mulator)
is a framework to help researchers to implement prototype of botnet based
network malware. Researchers just need to implement the malware behaviour once
and then it can run the following three modes:</p>
<blockquote>
<div><ul class="simple">
<li><strong>emulation mode</strong>: In this mode, each copy of imalse will behave exactly like a
real malware. You can install it in a real machine, or in a virtual machine and
set up a testbed to test the characteristic of the malware.(Don&#8217;t use it
to attack other people&#8217;s machines;) ) [<strong>Note</strong>: you can
potentially work with Common Open Research Emulator to emulate a lot of nodes in
one machine]</li>
<li><strong>netns3 simulation mode</strong>:  You can specifiy the topology of the network and the ip addresses of
each node in this mode. IMALSE will launch virtual machines (linux namespace) for each
node in the network and construct  the network automatically. All virtualized nodes
will connect to <strong>NS3</strong> through tapbridge and all traffic will consume
there. The simulation will be in real time. It is based on <a class="reference external" href="http://www.nsnam.org/wiki/index.php/HOWTO_use_Linux_namespaces_with_ns-3">netns3</a>
project.</li>
<li><strong>pure ns3 simulation mode</strong>: No virtual machince will be launched for the
pure ns3 simulation mode, the whole simulation will be done in <a class="reference external" href="http://www.nsnam.org/">ns3</a>. ns3
default scheduler will be used instead of the real time scheduler in
netns3 case, which saves much time. One simulation day may only consume
several real seconds.</li>
<li><strong>hybrid approach</strong>: of pure ns3 mode and netns3 mode</li>
</ul>
</div></blockquote>
<img alt="_images/imalse-abstract23.png" class="align-center" src="_images/imalse-abstract23.png" />
<div class="section" id="typical-use-case">
<h3>Typical Use Case<a class="headerlink" href="#typical-use-case" title="Permalink to this headline">¶</a></h3>
<p>Suppose Conan is a Ph.D student who has proposed a novel anomaly
detection technique for Internet traffic. He wants to demostrate the usefulness of this approach. To
do this, he designed a scenario that 100 client computers accessing a server through the internet, 10 of
which had already been compromised and controlled by botmaster through botnet. At some point, the botmaster
will initiate a ddos attack by asking all compromised computers to send ping
requests to the servers. The anomaly detection technique requires all the
incoming and outcoming traffic of the server for at least two days.</p>
<p>How can he collect the data he want? imalse provides different solutions at
different abstract level. He decide to use <strong>ImalseTopoSimExperiment</strong> and select <strong>ddos_ping_attack</strong>
attacking scenario from the imalse software which provide exactly what he wants.</p>
<p>The first question is since the method is not mature, Conan want to test it
under different parameter combinations. It will be forever if each simulation
takes more than two days. Fortunately, by running the simulation under <strong>pure ns3 simulation mode</strong>
Conan can finish one simulation with less 100 real seconds, though the time
has past for more than two days in the simulator.</p>
<p>After extensive testing, Conan has been quite confident about the performance of
the anomaly detection techinique now. But he is still a little bit worried about
whether the result of ns3 is convincing enough. As a result, he run a complete
simulation under <strong>netns3 simulation model</strong> and collect data. Of course, this
time it runs more than two days, but he doesn&#8217;t care that much because he only
need to run it for very few times. Conan generate some plots and write a paper
with data of <strong>netns3 simulation model</strong> and satisfied with this.</p>
<p>A rich company named NetSecurity read this paper and think it is a good method. They want to
deploy it but need more realistic test before deployment, so they decide
to test it under their intranet. They ask Conan for a copy of the code and
select several computer in the intranet to join the botnet, each computer run an independent copy of
imalse under <strong>emulation client mode</strong>, there is a computer serving as botmster
and running a imalse under <strong>emulation server model</strong>(the server refers to the C&amp;C
server in the botnet). The data of attacked server is recorded and analyzed with
Conan&#8217;s tools. It turns out to be good, and the Company decide to use this
method.</p>
<p>As a lazy Ph.D student, Conan just need to write one copy of code to describe
the secnario during the whole process. With the help of imalse, he can have more
time to sleep and enjoy the classical music. :)</p>
</div>
</div>
<div class="section" id="description">
<h2>Description:<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>To support the variety of modes noted above, Imalse design in a way that to
seperate the botnet mechanism and the network.</p>
<p>The general structure of Imalse is shown in the following figure:</p>
<img alt="_images/genearal-structure21.png" class="align-center" src="_images/genearal-structure21.png" />
<p><strong>Node</strong> and <strong>C</strong>ommand <strong>M</strong>eta <strong>D</strong>escription are the two key concepts in the design.
<strong>Node</strong> is the abstraction of a real computer. A node should support:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Basic Utility Functions</strong>: serveral basic utility calls, including
getting the system time, make node sleep, so on so forth</li>
<li><strong>Socket API</strong> this is require to implement basic</li>
<li><strong>File System</strong></li>
<li><strong>Higher Level Application</strong></li>
</ul>
</div></blockquote>
<p>There is a abstract base class in core module named <strong>BaseNode</strong> that define the
all APIs a node need to overload. If you want to extend the framework to support
other type of simulator, please subclass <strong>BaseNode</strong> and implement all the
virtual functions.</p>
<p>a command is a basic event in the botnet. <strong>C</strong>ommand <strong>M</strong>eta <strong>D</strong>escription defines a set of
commands for a node, namely it defines what event a node can generate. There are three types of <strong>CMD</strong>s:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Server <strong>CMD</strong></li>
<li>Client <strong>CMD</strong></li>
<li>Botmaster <strong>CMD</strong></li>
</ol>
</div></blockquote>
<p>The basic information flow is, botmaster send commands to server, server will
translate the commands and send commands to Clients.</p>
<div class="section" id="basic-botnet-mechanism">
<h3>Basic Botnet Mechanism:<a class="headerlink" href="#basic-botnet-mechanism" title="Permalink to this headline">¶</a></h3>
<p>In <strong>core</strong> module, imalse provides a basic framework for the botnet and the
support to real network, netns3 and NS3. User can create their own flavor of
botnet by subclassing <strong>ServerCMD</strong>, <strong>ClientCMD</strong> and <strong>BotmasterCMD</strong>, each
flavor is called a new <strong>scenario</strong>.
implement</p>
<div align="center" class="align-center"><object data="_images/client_fsm12.svg" height="400px" type="image/svg+xml"><embed height="400px" src="_images/client_fsm12.svg" type="image/svg+xml" /></object>
</div>
</div>
</div>
<div class="section" id="extension">
<h2>Extension:<a class="headerlink" href="#extension" title="Permalink to this headline">¶</a></h2>
<p>To implement a new scenario, you need to create a new folder in scenario
folder. This folder actually is a new module in python. This module should
provide the following classes: <strong>BotMaster</strong>, <strong>ClientCMD</strong>, <strong>ServerCMD</strong>.</p>
<p>You can subclass the BotMaster ClientCMD and ServerCMD in core, which provide a
botnet communication scheme and make the difference of real node, netns3 node
and ns3 sim node to be transparent.</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<p>Contents:</p>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to IMALSE&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#typical-use-case">Typical Use Case</a></li>
</ul>
</li>
<li><a class="reference internal" href="#description">Description:</a><ul>
<li><a class="reference internal" href="#basic-botnet-mechanism">Basic Botnet Mechanism:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extension">Extension:</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">imalse v0.0 alpha documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jing Conan Wang.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>